# Muse AI Studio

AI-powered creative studio for generating fashion outfits, canvas art, and multimedia content.

> **å½“å‰çŠ¶æ€**: åŸºç¡€è„šæ‰‹æ¶æ­å»ºå®Œæˆï¼Œæ­£åœ¨æ·»åŠ å¤–éƒ¨æ¨¡å‹ API ä¾›åº”å•†ã€‚å‰ç«¯/åç«¯ä¸šåŠ¡é€»è¾‘å°šæœªå®ç°ã€‚

## Project Structure

```
muse_studio/
â”œâ”€â”€ .env                          # API Keysã€é…ç½®ï¼ˆç›´æ¥ç”¨ï¼Œåˆ«è¿‡åº¦æŠ½è±¡ï¼‰
â”œâ”€â”€ .env.example                  # é…ç½®ç¤ºä¾‹æ–‡ä»¶
â”œâ”€â”€ .gitignore                    # Git å¿½ç•¥è§„åˆ™
â”œâ”€â”€ README.md                     # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ requirements.txt              # Python ä¾èµ–
â”œâ”€â”€ package.json                  # å‰ç«¯ä¾èµ–
â”œâ”€â”€ docs/                         # æ‰€æœ‰æ–‡æ¡£åˆå¹¶åˆ°ä¸€å¤„
â”‚   â”œâ”€â”€ PRD/                      # äº§å“éœ€æ±‚(ç»™äººçœ‹)
â”‚   â””â”€â”€ AI_PRD/                   # AI å®ç°PRD(ç»™ AI çœ‹)
â”‚       â””â”€â”€ provider_sop.md       # æ¨¡å‹/ä¾›åº”å•†æ·»åŠ æ ‡å‡†æ“ä½œæµç¨‹
â”œâ”€â”€ logs/                         # æ—¥å¿—ç›®å½•ï¼ˆæ‰€æœ‰æ—¥å¿—è¾“å‡ºè‡³æ­¤ï¼‰
â”œâ”€â”€ scripts/                      # é¡¹ç›®è¿è¡Œä¸è¿ç»´è„šæœ¬
â”‚   â”œâ”€â”€ setup.sh                  # ç¯å¢ƒæ„å»ºè„šæœ¬ï¼ˆåˆ›å»º venv + å®‰è£…ä¾èµ–ï¼‰
â”‚   â”œâ”€â”€ restart.sh                # é‡å¯æœåŠ¡è„šæœ¬
â”‚   â””â”€â”€ test.sh                   # ä¸€é”®è¿è¡Œæµ‹è¯•è„šæœ¬
â”œâ”€â”€ src/                          # æºä»£ç ä¸»ç›®å½•
â”‚   â”œâ”€â”€ backend/                  # åç«¯ï¼ˆFastAPIï¼‰
â”‚   â”‚   â”œâ”€â”€ main.py               # å…¥å£ + è·¯ç”±å…¨åœ¨è¿™ï¼Œå¤Ÿç”¨å†æ‹†
â”‚   â”‚   â”œâ”€â”€ config.py             # è¯» .envï¼Œæš´éœ²é…ç½®å¸¸é‡
â”‚   â”‚   â”œâ”€â”€ database.py           # DB è¿æ¥ï¼ˆPostgreSQL ä¼˜å…ˆï¼Œç®€å•å¤Ÿç”¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ models.py             # æ‰€æœ‰ ORM æ¨¡å‹æ”¾ä¸€èµ·ï¼ˆæ—©æœŸä¸ç”¨æ‹†ï¼‰
â”‚   â”‚   â”œâ”€â”€ schemas.py            # æ‰€æœ‰ Pydantic Schema æ”¾ä¸€èµ·
â”‚   â”‚   â”œâ”€â”€ utils.py              # æ—¥å¿—ã€å¼‚å¸¸ã€å·¥å…·å‡½æ•°å…¨åœ¨ä¸€èµ·
â”‚   â”‚   â”œâ”€â”€ services/             # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆå¾…å®ç°ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ generation.py     # è°ƒåº¦ AI ç”Ÿæˆï¼ˆé‡ç‚¹é€»è¾‘æ”¾è¿™ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ outfit.py
â”‚   â”‚   â”‚   â””â”€â”€ canvas.py
â”‚   â”‚   â””â”€â”€ providers/            # å¤–éƒ¨ API å°è£…ï¼ˆæ­£åœ¨å¼€å‘ä¸­ï¼‰
â”‚   â”‚       â”œâ”€â”€ llm/              # LLM æä¾›å•†
â”‚   â”‚       â”‚   â”œâ”€â”€ base.py       # BaseLLMProvider æŠ½è±¡åŸºç±»
â”‚   â”‚       â”‚   â”œâ”€â”€ zhipu.py      # æ™ºè°± AI å®ç°
â”‚   â”‚       â”‚   â”œâ”€â”€ gemini.py     # Google Gemini å®ç°
â”‚   â”‚       â”‚   â””â”€â”€ thirtytwo.py  # 302.AI æ¨¡å‹èšåˆå¹³å°å®ç°
â”‚   â”‚       â””â”€â”€ image/            # å›¾åƒç”Ÿæˆæä¾›å•†
â”‚   â”‚           â”œâ”€â”€ base.py       # BaseImageProvider æŠ½è±¡åŸºç±»
â”‚   â”‚           â””â”€â”€ thirtytwo.py  # 302.AI å›¾åƒç”Ÿæˆå®ç°
â”‚   â””â”€â”€ frontend/                 # å‰ç«¯ï¼ˆReact + TS / æˆ–ç›´æ¥ç”¨ HTMLï¼‰
â”‚       â”œâ”€â”€ index.html
â”‚       â”œâ”€â”€ vite.config.ts
â”‚       â””â”€â”€ src/
â”‚           â”œâ”€â”€ main.tsx
â”‚           â”œâ”€â”€ App.tsx
â”‚           â”œâ”€â”€ api.ts            # æ‰€æœ‰æ¥å£è¯·æ±‚ç»Ÿä¸€æ”¾ä¸€ä¸ªæ–‡ä»¶
â”‚           â”œâ”€â”€ store.ts          # çŠ¶æ€ç®¡ç†ï¼ˆZustandï¼Œä¸€ä¸ªæ–‡ä»¶å¤Ÿï¼‰
â”‚           â”œâ”€â”€ types.ts          # æ‰€æœ‰ç±»å‹å®šä¹‰æ”¾ä¸€èµ·
â”‚           â”œâ”€â”€ components/       # ç»„ä»¶ï¼ˆæ‰å¹³æ”¾ï¼Œåˆ«è¿‡æ—©åˆ† ui/businessï¼‰
â”‚           â”‚   â”œâ”€â”€ OutfitCard.tsx
â”‚           â”‚   â”œâ”€â”€ CanvasEditor.tsx
â”‚           â”‚   â””â”€â”€ GenerationPanel.tsx
â”‚           â”œâ”€â”€ pages/
â”‚           â”‚   â”œâ”€â”€ Home.tsx
â”‚           â”‚   â”œâ”€â”€ Canvas.tsx
â”‚           â”‚   â””â”€â”€ Generation.tsx
â”‚           â””â”€â”€ hooks/
â”‚               â””â”€â”€ useGeneration.ts  # è½®è¯¢ç”ŸæˆçŠ¶æ€ï¼ˆå€¼å¾—å•ç‹¬ä¸€ä¸ª hookï¼‰
â””â”€â”€ tests/                        # æµ‹è¯•ï¼ˆæ–°å¢ä»£ç å¿…é¡»æ·»åŠ æµ‹è¯•ï¼‰
    â”œâ”€â”€ conftest.py               # æµ‹è¯•é…ç½®/å¤¹å…·
    â”œâ”€â”€ llm/                      # LLM æä¾›å•†æµ‹è¯•
    â”‚   â”œâ”€â”€ test_zhipu.py         # æ™ºè°± AI æµ‹è¯•
    â”‚   â”œâ”€â”€ test_gemini.py        # Gemini æµ‹è¯•
    â”‚   â””â”€â”€ test_thirtytwo.py     # 302.AI æµ‹è¯•
    â””â”€â”€ image/                    # å›¾åƒæä¾›å•†æµ‹è¯•
        â””â”€â”€ test_thirtytwo.py     # 302.AI å›¾åƒæµ‹è¯•
```


### å·²å®ç°çš„å‚å•†

#### LLM æä¾›å•†

| å‚å•† | ç±»å | çŠ¶æ€ | æ¨èæ¨¡å‹ |
|------|------|------|----------|
| æ™ºè°± AI | `ZhipuProvider` | âœ… å·²å®ç° | `glm-4.7-flash` |
| Google Gemini | `GeminiProvider` | âœ… å·²å®ç° | `gemini-2.5-flash` |
| 302.AI | `ThirtyTwoProvider` | âœ… å·²å®ç° | `gemini-2.5-flash` |
| OpenAI | `OpenAIProvider` | ğŸš§ å¾…å®ç° | - |
| Anthropic | `AnthropicProvider` | ğŸš§ å¾…å®ç° | - |

#### å›¾åƒç”Ÿæˆæä¾›å•†

| å‚å•† | ç±»å | çŠ¶æ€ | æ¨èæ¨¡å‹ |
|------|------|------|----------|
| 302.AI | `ThirtyTwoImageProvider` | âœ… å·²å®ç° | `flux-pro` / `flux-realism` |

---

## å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒæ„å»º

```bash
./scripts/setup.sh    # åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥å¯¹åº”å‚å•†çš„ API Keys
```

### 3. è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œå…¨éƒ¨æµ‹è¯•
./scripts/test.sh

# è¿è¡ŒæŒ‡å®šç±»å‹æµ‹è¯•
./scripts/test.sh tests/llm/        # ä»… LLM æµ‹è¯•
./scripts/test.sh tests/image/      # ä»…å›¾åƒæµ‹è¯•
./scripts/test.sh tests/llm/test_zhipu.py  # æŒ‡å®šæ–‡ä»¶
```

### 4. æŸ¥çœ‹æ—¥å¿—

```bash
# æµ‹è¯•æ—¥å¿—ï¼ˆå¸¦æ—¶é—´æˆ³ï¼‰
ls -lt logs/test_*.log | head -1 | xargs tail -f

# å®æ—¶ç›‘æ§æœ€æ–°æ—¥å¿—
tail -f logs/test_*.log
```

### 5. å¯åŠ¨æœåŠ¡

```bash
./scripts/restart.sh  # é‡å¯åç«¯æœåŠ¡
```

## å¼€å‘è§„èŒƒ

### æ·»åŠ æ–°ä¾›åº”å•†

æ·»åŠ æ–°çš„ AI æ¨¡å‹/ä¾›åº”å•†è¯·éµå¾ª `docs/AI_PRD/provider_sop.md` ä¸­çš„æ ‡å‡†æµç¨‹ï¼š

1. åˆ›å»º Provider æ–‡ä»¶ï¼š`src/backend/providers/<type>/<vendor>.py`
2. æ›´æ–°æ¨¡å—å¯¼å‡ºï¼š`__init__.py`
3. æ·»åŠ é…ç½®é¡¹ï¼š`config.py` + `.env.example`
4. åˆ›å»ºæµ‹è¯•ï¼š`tests/<type>/test_<vendor>.py`
5. è¿è¡Œæµ‹è¯•éªŒè¯ï¼š`./scripts/test.sh`

### é€šç”¨è§„èŒƒ

- **ä»£ç é£æ ¼**: éµå¾ª PEP 8
- **æäº¤è§„èŒƒ**: ä½¿ç”¨ Conventional Commitsï¼ˆfeat/fix/refactor/docs/testï¼‰
- **æµ‹è¯•è¦†ç›–**: æ–°å¢ä»£ç å¿…é¡»æ·»åŠ æµ‹è¯•ï¼Œæ ¸å¿ƒè·¯å¾„ 80%+ è¦†ç›–ç‡
- **æ—¥å¿—è¾“å‡º**: æ‰€æœ‰æ—¥å¿—è¾“å‡ºåˆ° `logs/` ç›®å½•
- **æ–‡æ¡£**: ä»£ç å˜æ›´åŒæ­¥æ›´æ–° README

## License

MIT
